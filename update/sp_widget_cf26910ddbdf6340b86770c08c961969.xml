<?xml version="1.0" encoding="UTF-8"?>
<record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[function($scope, $mdDialog) {
	/* widget controller */
	var c = this;
	c.accordionStatus = [
		true,
		true,
		true,
		true,
		true
	];
	
	c.job_category = [];
	c.scientific_focus = [];
	c.other_scientific_focus = '';
	c.citizenship = [];
	
	c.majors = [
		{label: 'Biology', value: 'biology'},
		{label: 'Biostatistics', value: 'biostatistics'},
		{label: 'Epidemiology', value: 'epidemiology'},
		{label: 'Mathematics', value: 'mathematics'},
		{label: 'Statistics', value: 'statistics'},
		{label: 'Other Major', value: 'other'}
	];
	
	c.submission_start_date = null;
	c.submission_end_date = null;
	c.submission_date = 'last_week';
	c.submission_dates = [
		{label: 'Last Week', value: 'last_week'},
		{label: 'Last Month', value: 'last_month'},
		{label: 'Last Year', value: 'last_year'},
		{label: 'Custom', value: 'custom'}
	];
	
	c.degree = [];
	c.major = [];
	c.scientific_focus = [];
	c.state = [];
	c.people = [];
	c.selectedPerson = {};
	
	c.sortCriteria = '';

	$scope.randomItem = function(array) {
		return array[Math.floor(Math.random() * array.length)];
	}

	$scope.firstNames = ["Liam","Noah","William","James","Logan","Benjamin","Mason","Elijah","Oliver","Jacob","Emma","Olivia","Ava","Isabella","Sophia","Mia","Charlotte","Amelia","Evelyn","Abigail"]
	$scope.lastNames = ["Smith","Johnson","Williams","Jones","Brown","Davis","Miller","Wilson","Moore","Taylor","Anderson","Thomas","Jackson","White","Harris","Martin","Thompson","Garcia","Martinez","Robinson","Clark","Rodriguez","Lewis","Lee","Walker","Hall","Allen","Young","Hernandez","King","Wright","Lopez","Hill","Scott","Green","Adams","Baker","Gonzalez","Nelson","Carter","Mitchell","Perez","Roberts","Turner","Phillips","Campbell","Parker","Evans","Edwards","Collins","Stewart","Sanchez","Morris","Rogers","Reed","Cook","Morgan","Bell","Murphy","Bailey","Rivera","Cooper","Richardson","Cox","Howard","Ward","Torres","Peterson","Gray","Ramirez","James","Watson","Brooks","Kelly","Sanders","Price","Bennett","Wood","Barnes","Ross","Henderson","Coleman","Jenkins","Perry","Powell","Long","Patterson","Hughes","Flores","Washington","Butler","Simmons","Foster","Gonzales","Bryant","Alexander","Russell","Griffin","Diaz","Hayes"]

	function randomPerson() {
		var name = $scope.randomItem($scope.firstNames) + ' ' + $scope.randomItem($scope.lastNames);
		var focus = [];
		for (var i = 0; i < 1 + Math.floor(Math.random() * 3); i ++) {
			var item = $scope.randomItem(c.data.fields.scientific_focus);
			if (item.label)
				focus.push(item.label)
		}
		
		return {
			name: name,
			date: new Date(new Date() - Math.random() * 100000000000),
			job: $scope.randomItem(c.data.fields.job_category).label,
			focus: focus.join(', '),
			saved: Math.random() > 0.6
		}
	}
	
	for (var i = 0; i < 10; i ++) {
		c.people.push(randomPerson());
	}
	
	$scope.randomDate = function() {
		
	}
	
	$scope.sortApplicants = function() {
		console.log(c.sortCriteria);
		switch(c.sortCriteria) {
			case 'Name':
				c.people = c.people.sort(function(a, b) {
					return a.name.localeCompare(b.name);
				})
				break;
			case 'Submission Date':
				c.people = c.people.sort(function(a, b) {
					return a.date - b.date;
				});
				break;
			case 'Job Category':
				c.people = c.people.sort(function(a, b) {
					return a.job.localeCompare(b.job);
				});
				break;
			case 'Saved':
				c.people = c.people.sort(function(a, b) {
					return a.saved ? -1 : 1;
				});
				break;

		
		}
	}
	
	$scope.goto = function(href) {
		window.location.href = href;
	}
	
	
} ]]></client_script>
        <controller_as>c</controller_as>
        <css>.material-select {
    background-color: transparent;
    border: none;
    border-bottom: 2px solid steelblue;
    font-family: inherit;
}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>future_fellows_search</id>
        <internal>false</internal>
        <link/>
        <name>Future Fellows Search</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
	
	
	
	/* populate the 'data' object */
	/* e.g., data.table = $sp.getValue('table'); */
	data.fields = {
		"citizenship": [
			{
				"value": 1,
				"label": "United States"
			},
			{
				"value": 2,
				"label": "U.S. Permanent Resident "
			},
			{
				"value": 3,
				"label": "Canadian"
			},
			{
				"value": 4,
				"label": "F-1 Visa"
			},
			{
				"value": 5,
				"label": "H-1 Visa"
			},
			{
				"value": 6,
				"label": "J-1 Visa"
			},
			{
				"value": 7,
				"label": "Foreign National"
			}
		],
		"education_level": [
			{
				"value": 1,
				"label": "DDS"
			},
			{
				"value": 2,
				"label": "DO"
			},
			{
				"value": 3,
				"label": "DSc"
			},
			{
				"value": 4,
				"label": "DVM"
			},
			{
				"value": 5,
				"label": "JD"
			},
			{
				"value": 6,
				"label": "MD"
			},
			{
				"value": 7,
				"label": "MPH"
			},
			{
				"value": 8,
				"label": "PhD"
			},
			{
				"value": 9,
				"label": "PharmD"
			},
			{
				"value": 10,
				"label": "Sc.D."
			}
		],
		"job_category": [
			{
				"value": 1,
				"label": "Postdoctoral Fellowship"
			},
			{
				"value": 2,
				"label": "Postdoctoral Fellowship (Foreign Visiting Fellow)"
			},
			{
				"value": 3,
				"label": "Doctoral Fellowship"
			},
			{
				"value": 4,
				"label": "Postbaccalaureate (Master or Post-Undergrad) Fellowship"
			}
		],
		"scientific_focus": [
			{
				"value": 0,
				"label": "Biomedical Engineering / Biophysics / Physics"
			},
			{
				"value": 1,
				"label": "Biostatistics / Mathematics"
			},
			{
				"value": 2,
				"label": "Cancer Biology"
			},
			{
				"value": 3,
				"label": "Chemistry / Chemical Biology"
			},
			{
				"value": 4,
				"label": "Chromosome Biology / Epigenetics"
			},
			{
				"value": 5,
				"label": "Clinical Research"
			},
			{
				"value": 6,
				"label": "Computational Biology / Bioinformatics"
			},
			{
				"value": 7,
				"label": "Developmental Biology"
			},
			{
				"value": 8,
				"label": "Epidemiology / Population Sciences",
				"children": [
					{
						"value": 81,
						"label": "Clinical epidemiology"
					},
					{
						"value": 82,
						"label": "Environmental / occupational epidemiology"
					},
					{
						"value": 83,
						"label": "Epidemiological Methods"
					},
					{
						"value": 84,
						"label": "Descriptive epidemiology"
					},
					{
						"value": 85,
						"label": "Genetic / genomic epidemiology"
					},
					{
						"value": 86,
						"label": "Infections and Immune epidemiology"
					},
					{
						"value": 87,
						"label": "Nutritional epidemiology"
					},
					{
						"value": 88,
						"label": "Reproductive epidemiology"
					},
					{
						"value": 89,
						"label": "Radiation epidemiology"
					}
				]
			},
			{
				"value": 9,
				"label": "Genetics / Genomics"
			},
			{
				"value": 10,
				"label": "Health Disparities"
			},
			{
				"value": 11,
				"label": "Immunology"
			},
			{
				"value": 12,
				"label": "Microbiology / Infectious diseases (non-viral)"
			},
			{
				"value": 13,
				"label": "Molecular Biology / Biochemistry"
			},
			{
				"value": 14,
				"label": "Molecular Pharmacology / Toxicology"
			},
			{
				"value": 15,
				"label": "Neuroscience / Neurophysiology / Neurodevelopment"
			},
			{
				"value": 16,
				"label": "Social and Behavioral Sciences"
			},
			{
				"value": 17,
				"label": "Stem Cells / Induced Pluripotent Stem Cells"
			},
			{
				"value": 18,
				"label": "Exposure Assessment/GIS"
			},
			{
				"value": 19,
				"other": true,
				"label": "Other"
			}
		],
		"state": [
			{
				"value": 1,
				"label": "AK"
			},
			{
				"value": 2,
				"label": "AL"
			},
			{
				"value": 3,
				"label": "AR"
			},
			{
				"value": 4,
				"label": "AZ"
			},
			{
				"value": 5,
				"label": "CA"
			},
			{
				"value": 6,
				"label": "CO"
			},
			{
				"value": 7,
				"label": "CT"
			},
			{
				"value": 8,
				"label": "DC"
			},
			{
				"value": 9,
				"label": "DE"
			},
			{
				"value": 10,
				"label": "FL"
			},
			{
				"value": 11,
				"label": "GA"
			},
			{
				"value": 12,
				"label": "HI"
			},
			{
				"value": 13,
				"label": "IA"
			},
			{
				"value": 14,
				"label": "value"
			},
			{
				"value": 15,
				"label": "IL"
			},
			{
				"value": 16,
				"label": "IN"
			},
			{
				"value": 17,
				"label": "KS"
			},
			{
				"value": 18,
				"label": "KY"
			},
			{
				"value": 19,
				"label": "LA"
			},
			{
				"value": 20,
				"label": "MA"
			},
			{
				"value": 21,
				"label": "MD"
			},
			{
				"value": 22,
				"label": "ME"
			},
			{
				"value": 23,
				"label": "MI"
			},
			{
				"value": 24,
				"label": "MN"
			},
			{
				"value": 25,
				"label": "MO"
			},
			{
				"value": 26,
				"label": "MS"
			},
			{
				"value": 27,
				"label": "MT"
			},
			{
				"value": 28,
				"label": "NC"
			},
			{
				"value": 29,
				"label": "ND"
			},
			{
				"value": 30,
				"label": "NE"
			},
			{
				"value": 31,
				"label": "NH"
			},
			{
				"value": 32,
				"label": "NJ"
			},
			{
				"value": 33,
				"label": "NM"
			},
			{
				"value": 34,
				"label": "NV"
			},
			{
				"value": 35,
				"label": "NY"
			},
			{
				"value": 36,
				"label": "OH"
			},
			{
				"value": 37,
				"label": "OK"
			},
			{
				"value": 38,
				"label": "OR"
			},
			{
				"value": 39,
				"label": "PA"
			},
			{
				"value": 40,
				"label": "RI"
			},
			{
				"value": 41,
				"label": "SC"
			},
			{
				"value": 42,
				"label": "SD"
			},
			{
				"value": 43,
				"label": "TN"
			},
			{
				"value": 44,
				"label": "TX"
			},
			{
				"value": 45,
				"label": "UT"
			},
			{
				"value": 46,
				"label": "VA"
			},
			{
				"value": 47,
				"label": "VT"
			},
			{
				"value": 48,
				"label": "WA"
			},
			{
				"value": 49,
				"label": "WI"
			},
			{
				"value": 50,
				"label": "WV"
			},
			{
				"value": 51,
				"label": "WY"
			}
		]
	};

})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>parkbw@nih.gov</sys_created_by>
        <sys_created_on>2019-01-27 16:50:38</sys_created_on>
        <sys_customer_update>false</sys_customer_update>
        <sys_id>cf26910ddbdf6340b86770c08c961969</sys_id>
        <sys_mod_count>273</sys_mod_count>
        <sys_name>Future Fellows Search</sys_name>
        <sys_package display_value="Future Fellows" source="x_naci_future_fell">34c0a415db0ba700b86770c08c9619dc</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="Future Fellows">34c0a415db0ba700b86770c08c9619dc</sys_scope>
        <sys_update_name>sp_widget_cf26910ddbdf6340b86770c08c961969</sys_update_name>
        <sys_updated_by>parkbw@nih.gov</sys_updated_by>
        <sys_updated_on>2019-03-03 02:33:55</sys_updated_on>
        <template><![CDATA[<div class="container">
  <h1>
    Search Applicants
  </h1>
  <hr>

  <div  layout-gt-sm="row" layout-wrap>

    <div flex-gt-sm="35">

      <uib-accordion close-others="false">

        <div uib-accordion-group 
             class="panel-primary shadow-lg mb-5" 
             is-open="c.accordionStatus[0]">
          <uib-accordion-heading>
            Submission Date
            <i class="pull-right fa" 
               ng-class="{'fa-chevron-down': c.accordionStatus[0], 
                         'fa-chevron-right': !c.accordionStatus[0]}"></i>
          </uib-accordion-heading>    

          <md-input-container class="md-block" style="width: 100%">
            <label>Submission Date</label>
            <md-select ng-model="c.submission_date">
              <md-option ng-repeat="item in c.submission_dates" 
                         ng-value="item.value">
                {{ item.label }}
              </md-option>
            </md-select>
          </md-input-container>            

          <md-input-container class="md-block">
            <label>Start Date</label>
            <md-datepicker ng-model="c.submission_start_date" 
                           md-open-on-focus
                           md-hide-icons="calendar"
                           ng-change="c.submission_date = 'custom'">
            </md-datepicker>
          </md-input-container>            

          <md-input-container class="md-block">
            <label>End Date</label>
            <md-datepicker ng-model="c.submission_end_date" 
                           md-open-on-focus
                           md-hide-icons="calendar"
                           ng-change="c.submission_date = 'custom'">
            </md-datepicker>
          </md-input-container>            

        </div>

        <div uib-accordion-group 
             class="panel-primary shadow-lg mb-5" 
             is-open="c.accordionStatus[1]">

          <uib-accordion-heading>
            General Filters
            <i class="pull-right fa" 
               ng-class="{'fa-chevron-down': c.accordionStatus[1], 
                         'fa-chevron-right': !c.accordionStatus[1]}"></i>
          </uib-accordion-heading>    


          <md-input-container class="md-block" style="max-width: 100%">
            <label>Job Category</label>
            <md-select ng-model="c.job_category"
                       multiple>
              <md-option ng-repeat="field in c.data.fields.job_category"
                         ng-value="field.value" >
                {{ field.label }}
              </md-option>
            </md-select>
          </md-input-container>        


          <md-input-container class="md-block" style="max-width: 100%">
            <label>Scientific Focus</label>
            <md-select ng-model="c.scientific_focus"
                       multiple>

              <ng-container ng-repeat="field in c.data.fields.scientific_focus">
                <md-option ng-if="!field.children"
                           ng-value="field.value" >
                  {{ field.label }}
                </md-option>

                <md-optgroup ng-if="field.children"
                             label="{{ field.label }}">
                  <md-option style="margin-left: 20px"
                             ng-repeat="child in field.children"
                             ng-value="child.value">
                    {{ child.label }}
                  </md-option>
                </md-optgroup>

              </ng-container>
            </md-select>
          </md-input-container>        


          <md-input-container class="md-block" style="max-width: 100%">
            <label>Citizenship/Visa Status</label>
            <md-select ng-model="c.citizenship"
                       multiple>
              <md-option ng-repeat="item in c.data.fields.citizenship"
                         ng-value="item.value">
                {{ item.label }}
              </md-option>
            </md-select>
          </md-input-container>            



        </div>


        <div uib-accordion-group 
             class="panel-primary shadow-lg mb-5" 
             style="overflow: hidden"
             is-open="c.accordionStatus[2]">

          <uib-accordion-heading>
            Education
            <i class="pull-right fa" 
               ng-class="{'fa-chevron-down': c.accordionStatus[2], 
                         'fa-chevron-right': !c.accordionStatus[2]}"></i>
          </uib-accordion-heading>    


          <md-input-container class="md-block">
            <label>Degree</label>
            <md-select ng-model="c.degree" multiple>
              <md-option ng-repeat="item in c.data.fields.education_level" 
                         ng-value="item.value">
                {{ item.label }}
              </md-option>
            </md-select>
          </md-input-container>            


          <md-input-container class="md-block">
            <label>Major</label>
            <md-select ng-model="c.major" multiple>
              <md-option ng-repeat="item in c.majors" ng-value="item.value">
                {{ item.label }}
              </md-option>
            </md-select>
          </md-input-container>            
        </div>
      </uib-accordion>



      <div class="mb-5">
        <md-button class="md-raised md-primary m-0 shadow-lg" style="width: 100%">Search</md-button>
      </div>


    </div>

    <div flex-gt-sm="5"></div>

    <div flex-gt-sm="60" class="panel shadow-lg mb-5" style="border: none">

      <div class="panel-heading bg-primary">
        <h4 class="panel-title">
          Applicants
        </h4>
      </div>
      <div class="panel-body m-0 p-0">

        <md-list flex>
          <md-subheader class="md-no-sticky">
            <div class="clearfix">
              {{ c.people.length }} Applicants Found.  <br>
              To save applicants, use the toggle switch on the right.

              <div class="pull-right">
                Sort By
                <select class="material-select" 
                        aria-label="sort parameters"
                        ng-change="sortApplicants()" 
                        ng-model="c.sortCriteria">
                  <option>Name</option>
                  <option>Submission Date</option>
                  <option>Job Category</option>
                  <option>Saved</option>
                </select>
              </div>
            </div>
          </md-subheader>

          <md-list-item class="md-3-line" ng-repeat="item in c.people" href="/future-fellows?id=future_fellows_applicant" target="_blank">
            <div class="md-list-item-text" layout="column">
              <h3><strong>{{ item.name }}</strong> <small class="text-muted ml-3">{{ item.date.toLocaleDateString() }}</small></h3>
              <h4>
                <em>{{ item.job }}</em>
              </h4>
              <p>{{ item.focus }}</p>
            </div>
            <md-switch class="md-secondary" ng-model="item.saved" md-invert="true">
              <small style="color: #595959; font-size: 12px;" ng-if="item.saved">Saved</small
                </md-switch>


                </md-list-item>      
              </md-list>
            </div>
          </div>

      </div>


    </div>
  </div>
</div>
]]></template>
    </sp_widget>
</record_update>
